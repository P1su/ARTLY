# **AI Section**

## AI 도슨트
> 본 디렉토리 내에 존재하는 DocentAudioPlayer.jsx는 ARTLY/client/src/pages... 내의 소스와 동일한 코드임 (1학기 작업물 기준)

> 도슨트 페이지는 client/src/pages/Artwork 디렉토리에 존재

> client 폴더 내에 .env 환경변수로 VITE_GCloud_API_KEY=... 지정해주어야 작동함

> Google TTS의 'ko-KR-Chirp3-HD-Kore' 음성을 사용하며, 도슨트 페이지의 스크립트 갱신 시마다 API를 호출해 오디오를 불러옴 (추후 음성파일을 DB에 저장하는 방식으로 변경될 예정)

> 재생 속도 옵션을 통해 음성 파일 속도를 1배, 1.5배, 2배로 설정 가능

> 언어 설정의 경우 작품 상세정보 API의 응답에 각 언어 별 스크립트가 추가된 이후 구현될 예정

## 챗봇 

> 본 디렉토리 내에 존재하는 gpt.js는 백엔드 API 이식 전, 독립된 모듈으로 구현된 프로토타입 코드

> 챗봇 위젯은 client/src/components/ChatbotWidget 디렉토리에 존재

> 'http://artly.soundgram.co.kr/api/chats' URL으로 API 요청을 보냄으로써 동작함

> 각종 주제 (전시회, 작가, 갤러리, 공고, 기타 쓸데없는 질문 등등...)에 대한 질문을 사용자가 입력하면 그에 대한 답변을 보여줌
로그인된 사용자의 경우 ACCESS_TOKEN을 불러와서 세션 기반 API를 호출하며 대화 기록이 저장됨

> 로그인하지 않은 사용자 또한 챗봇을 사용 가능하지만, 대화 기록을 저장하지 않기 때문에 컨텍스트 기능 미지원

> 지난 채팅 내역을 불러오는 기능은 삭제되었으나, 사용자의 질문 및 챗봇 답변 내역이 DB에 저장되어 재접속하더라도 대화 컨텍스트가 이어짐

> API 작동 방식:
> 1. API 요청이 들어오면, 사용자 질문을 GPT에게 넘겨주며 의도 추출을 시도함
> 2. 사용자 질문의 의도가 json 형태로 반환됨 (어떤 주제에 대한 질문인지, 검색을 원한다면 필터 조건이 있는지 등등)
> 3. 
>>> Case 1. \
전시회, 작가 등 특정 주제에 대한 검색이나 추천 요청인 경우, 주어진 조건에 맞게 DB에서 쿼리를 수행함 \
>>> Case 2. \
그 외에 대한 질문인 경우, DB 쿼리는 수행하지 않음
> 4. 사용자 질문 및 쿼리 결과를 첨부하여 GPT에게 자연어 답변 생성을 요청함
> 5. 마지막으로 받은 내용을 요청받은 API에 대한 응답으로 반환